{% extends "base.html" %}

{% block title %}Taxi Tracker - Service{% endblock %}

{% block styles %}
<style>
    /* --- CSS Î³Î¹Î± Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ Î¯ÏƒÎ¿Ï… Î¼ÎµÎ³Î­Î¸Î¿Ï…Ï‚ --- */
    .btn-group-custom {
        display: flex;        /* Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ Flexbox */
        gap: 15px;           /* ÎšÎµÎ½ÏŒ Î±Î½Î¬Î¼ÎµÏƒÎ± ÏƒÏ„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
        margin-bottom: 20px;
    }

    .btn-equal {
        flex: 1;             /* ÎšÎ¬Î¸Îµ ÎºÎ¿Ï…Î¼Ï€Î¯ Ï€Î¹Î¬Î½ÎµÎ¹ Î¯ÏƒÎ¿ Ï‡ÏÏÎ¿ (1 Î¼ÎµÏÎ¯Î´Î¹Î¿) */
        text-align: center;  /* ÎšÎµÎ½Ï„ÏÎ¬ÏÎ¹ÏƒÎ¼Î± Ï„Î¿Ï… ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… */
        padding: 12px;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: bold;
        display: flex;           /* Î“Î¹Î± ÏƒÏ„Î¿Î¯Ï‡Î¹ÏƒÎ· ÎµÎ¹ÎºÎ¿Î½Î¹Î´Î¯Î¿Ï…-ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… */
        justify-content: center; /* ÎšÎµÎ½Ï„ÏÎ¬ÏÎ¹ÏƒÎ¼Î± ÏƒÏ„Î¿Î½ Î¬Î¾Î¿Î½Î± Î§ */
        align-items: center;     /* ÎšÎµÎ½Ï„ÏÎ¬ÏÎ¹ÏƒÎ¼Î± ÏƒÏ„Î¿Î½ Î¬Î¾Î¿Î½Î± Î¥ */
        gap: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        transition: transform 0.2s;
    }

    .btn-equal:hover {
        transform: translateY(-2px); /* Î•Ï†Î­ ÎºÎ¯Î½Î·ÏƒÎ·Ï‚ ÏŒÏ„Î±Î½ Ï€ÎµÏÎ½Î¬ÎµÎ¹ Ï„Î¿ Ï€Î¿Î½Ï„Î¯ÎºÎ¹ */
        opacity: 0.9;
    }

    /* Î§ÏÏÎ¼Î±Ï„Î± ÎšÎ¿Ï…Î¼Ï€Î¹ÏÎ½ */
    .btn-add { background-color: #27ae60; }    /* Î ÏÎ¬ÏƒÎ¹Î½Î¿ */
    .btn-work { background-color: #2980b9; }   /* ÎœÏ€Î»Îµ */
    .btn-parts { background-color: #e67e22; }  /* Î Î¿ÏÏ„Î¿ÎºÎ±Î»Î¯ */

    /* --- Î¥Ï€Î¬ÏÏ‡Î¿Î½Ï„Î± CSS --- */
    table { 
        width: 100%; 
        border-collapse: collapse; 
        margin-bottom: 30px; 
        background-color: var(--card-bg); 
        border-radius: var(--border-radius); 
        overflow: hidden; 
        box-shadow: var(--box-shadow); 
    }
    
    th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #eee; }
    th { background-color: var(--secondary-color); color: white; font-weight: 500; }
    tr:last-child td { border-bottom: none; }
    tr:hover { background-color: #f8f9fa; }

    .action-icon { text-decoration: none; font-size: 1.2em; margin-right: 5px; }
</style>
{% endblock %}

{% block content %}
    <h1>ğŸ”§ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Service Î¤Î±Î¾Î¯</h1>
    
    <!-- ÎšÎŸÎ¥ÎœÎ Î™Î‘ Î™Î£ÎŸÎ¥ ÎœÎ•Î“Î•Î˜ÎŸÎ¥Î£ -->
    <div class="btn-group-custom">
        <a href="{{ url_for('services.service_add') }}" class="btn-equal btn-add">
            <span>â•</span> Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Service
        </a>
        <a href="{{ url_for('services.workshops_list') }}" class="btn-equal btn-work">
            <span>ğŸ¢</span> Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î£Ï…Î½ÎµÏÎ³ÎµÎ¯Ï‰Î½
        </a>
        <a href="{{ url_for('services.parts_registry_list') }}" class="btn-equal btn-parts">
            <span>âš™ï¸</span> Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î‘Î½Ï„Î±Î»Î»Î±ÎºÏ„Î¹ÎºÏÎ½
        </a>
    </div>

    <!-- Î Î¯Î½Î±ÎºÎ±Ï‚ 1: Service History -->
    <h2>Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î•ÏÎ³Î±ÏƒÎ¹ÏÎ½</h2>
    <table>
        <thead>
            <tr>
                <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</th>
                <th>Î§Î¹Î»Î¹ÏŒÎ¼ÎµÏ„ÏÎ±</th>
                <th>ÎšÏŒÏƒÏ„Î¿Ï‚</th>
                <th>Î£Ï…Î½ÎµÏÎ³ÎµÎ¯Î¿</th>
                <th style="text-align: center;">Î•Î½Î­ÏÎ³ÎµÎ¹Î±</th>
            </tr>
        </thead>
        <tbody>
            {% for s in services %}
            <tr>
                <td>{{ s.service_date }}</td>
                <td>{{ s.odometer_km }}</td>
                <td>{{ "%.2f"|format(s.total_cost) }} â‚¬</td>
                <td>{{ s.workshop_name }}</td>
                <td style="text-align: center;">
                    <a href="{{ url_for('services.service_edit', id=s.id) }}" class="action-icon" title="Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±">âœï¸</a>
                    <a href="{{ url_for('services.service_delete', id=s.id) }}" class="action-icon" onclick="return confirm('Î”Î¹Î±Î³ÏÎ±Ï†Î®;')" title="Î”Î¹Î±Î³ÏÎ±Ï†Î®">ğŸ—‘ï¸</a>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="5" style="text-align:center; color:gray;">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ®ÏƒÎµÎ¹Ï‚.</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Î Î¯Î½Î±ÎºÎ±Ï‚ 2: Parts History -->
    <h2>Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î‘Î½Ï„Î±Î»Î»Î±ÎºÏ„Î¹ÎºÏÎ½</h2>
    <table>
        <thead>
            <tr>
                <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</th>
                <th>Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® Î‘Î½Ï„Î±Î»Î»Î±ÎºÏ„Î¹ÎºÎ¿Ï</th>
                <th style="text-align: center;">Î ÏÎ¿Î²Î¿Î»Î®</th>
            </tr>
        </thead>
        <tbody>
            {% for p in parts %}
            <tr>
                <td>{{ p.service_date }}</td>
                <td>{{ p.part_description }}</td>
                <td style="text-align: center;">
                    <a href="{{ url_for('services.service_edit', id=p.service_id) }}" class="action-icon" title="Î ÏÎ¿Î²Î¿Î»Î® Service">ğŸ”</a>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="3" style="text-align:center; color:gray;">ÎšÎ±Î½Î­Î½Î± Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ.</td></tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
