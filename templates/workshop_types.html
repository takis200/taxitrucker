{% extends "base.html" %}

{% block title %}Taxi Tracker - Î•Î¯Î´Î· Î£Ï…Î½ÎµÏÎ³ÎµÎ¯Ï‰Î½{% endblock %}

{% block styles %}
<style>
    .types-container {
        max-width: 700px;
        margin: 20px auto;
        padding: 25px;
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .form-inline {
        display: flex;
        gap: 10px;
        margin-bottom: 25px;
        padding: 20px;
        background: #eef2f7;
        border-radius: 8px;
    }

    .form-control {
        flex: 1;
        padding: 10px;
        border: 1px solid #ced4da;
        border-radius: 6px;
        font-size: 16px;
    }

    /* Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Ï„Î·Î½ Î¯Î´Î¹Î± Î»Î¿Î³Î¹ÎºÎ® Î¼Îµ Ï„Î¿ services.html */
    .btn-action {
        padding: 10px 15px;
        border-radius: 6px;
        text-decoration: none;
        color: white;
        font-weight: bold;
        border: none;
        cursor: pointer;
        display: inline-block;
    }

    .btn-add { background-color: #3498db; }
    .btn-back { background-color: #7f8c8d; }
    
    /* Î¤Î± ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î± ÎµÎ½ÎµÏÎ³ÎµÎ¹ÏÎ½ (Î¯Î´Î¹Î¿ ÏƒÏ„Ï…Î» Î¼Îµ Ï„Î¿ services.html) */
    .action-icon {
        text-decoration: none;
        font-size: 1.2em;
        margin-left: 10px;
        cursor: pointer;
        background: none;
        border: none;
    }

    /* Î›Î¯ÏƒÏ„Î± */
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    td { padding: 15px; border-bottom: 1px solid #eee; }
    tr:last-child td { border-bottom: none; }
</style>

<script>
    function toggleEdit(id) {
        var displayRow = document.getElementById('display-' + id);
        var editRow = document.getElementById('edit-' + id);
        
        if (displayRow.style.display === 'none') {
            displayRow.style.display = '';
            editRow.style.display = 'none';
        } else {
            displayRow.style.display = 'none';
            editRow.style.display = '';
            editRow.querySelector('input').focus();
        }
    }
</script>
{% endblock %}

{% block content %}
<div class="types-container">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2>âš™ï¸ Î•Î¯Î´Î· Î£Ï…Î½ÎµÏÎ³ÎµÎ¯Ï‰Î½</h2>
        <a href="{{ url_for('services.workshops_list') }}" class="btn-action btn-back">ğŸ”™ Î Î¯ÏƒÏ‰</a>
    </div>

    <!-- Î¦ÏŒÏÎ¼Î± Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·Ï‚ -->
    <form method="POST" class="form-inline">
        <input type="text" name="name" class="form-control" placeholder="ÎÎ­Î¿ ÎµÎ¯Î´Î¿Ï‚..." required>
        <button type="submit" class="btn-action btn-add">â• Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</button>
    </form>

    <!-- Î›Î¯ÏƒÏ„Î± ÏƒÎµ Î¼Î¿ÏÏ†Î® Î Î¯Î½Î±ÎºÎ± (Î³Î¹Î± Î½Î± Î¼Î¿Î¹Î¬Î¶ÎµÎ¹ Î¼Îµ Ï„Î¿ Services) -->
    <table>
        {% for t in types %}
        
        <!-- Î“ÏÎ±Î¼Î¼Î® Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ·Ï‚ -->
        <tr id="display-{{ t.id }}">
            <td style="font-weight: 600; color: #2c3e50;">{{ t.name }}</td>
            <td style="text-align: right;">
                <!-- ÎšÎ¿Ï…Î¼Ï€Î¯ Edit -->
                <button onclick="toggleEdit({{ t.id }})" class="action-icon" title="Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±">âœï¸</button>
                <!-- ÎšÎ¿Ï…Î¼Ï€Î¯ Delete -->
                <a href="{{ url_for('services.workshop_type_delete', id=t.id) }}" 
                   class="action-icon" 
                   onclick="return confirm('Î”Î¹Î±Î³ÏÎ±Ï†Î®;')" 
                   title="Î”Î¹Î±Î³ÏÎ±Ï†Î®">ğŸ—‘ï¸</a>
            </td>
        </tr>

        <!-- Î“ÏÎ±Î¼Î¼Î® Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ (ÎšÏÏ…Ï†Î®) -->
        <tr id="edit-{{ t.id }}" style="display: none; background-color: #f9f9f9;">
            <td colspan="2">
                <form action="{{ url_for('services.workshop_type_edit', id=t.id) }}" method="POST" style="display: flex; gap: 10px;">
                    <input type="text" name="name" value="{{ t.name }}" class="form-control" required>
                    <button type="submit" class="action-icon" title="Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·">ğŸ’¾</button>
                    <button type="button" onclick="toggleEdit({{ t.id }})" class="action-icon" title="Î‘ÎºÏÏÏ‰ÏƒÎ·">âŒ</button>
                </form>
            </td>
        </tr>

        {% else %}
        <tr><td style="text-align:center; color:gray; padding:20px;">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎµÎ¯Î´Î·.</td></tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
